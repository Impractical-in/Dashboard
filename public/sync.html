<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Backup & Sync</title>
    <link rel="stylesheet" href="css/sync.css" />
  </head>
  <body>
    <header class="topbar">
      <div>
        <div class="title">Backup & Sync</div>
        <div class="subtitle">Google Drive appDataFolder backups</div>
      </div>
      <a class="btn ghost" href="index.html">Back to Home</a>
    </header>

    <main class="stack">
      <section class="card">
        <div class="section-title">Local server sync</div>
        <div class="status" id="serverStatus">Disabled</div>
        <div class="field">
          <span>Server URL</span>
          <input id="serverUrl" type="text" placeholder="http://localhost:8080" />
        </div>
        <div class="field">
          <span>Shared token (optional)</span>
          <input id="serverToken" type="text" placeholder="DASHBOARD_TOKEN" />
        </div>
        <div class="actions">
          <label class="toggle">
            <input id="serverSyncToggle" type="checkbox" />
            <span>Enable sync</span>
          </label>
          <button class="btn" id="serverPullBtn" type="button">Pull from server</button>
          <button class="btn" id="serverPushBtn" type="button">Push to server</button>
        </div>
        <div class="hint">When enabled, saves push to the server and loads on startup.</div>
      </section>

      <section class="card">
        <div class="section-title">Local auto backup (Chromium)</div>
        <div class="status" id="localStatus">No backup file selected</div>
        <div class="status success" id="localSuccess" hidden>Backup successful</div>
        <div class="actions">
          <button class="btn primary" id="chooseLocalFileBtn" type="button">
            Choose backup file
            <span class="btn-sub" id="lastSavedLabel">Never</span>
          </button>
          <button class="btn" id="localSaveBtn" type="button">
            Save snapshot now
            <span class="btn-sub" id="lastBackupLabel">Never</span>
          </button>
        </div>
        <div class="field">
          <span>Auto snapshot</span>
          <div class="actions">
            <label class="toggle">
              <input id="localAutoBackup" type="checkbox" />
              <span>Enable</span>
            </label>
            <select id="localBackupInterval">
              <option value="1">Every 1 hour</option>
              <option value="2">Every 2 hours</option>
              <option value="5">Every 5 hours</option>
              <option value="12">Every 12 hours</option>
              <option value="20">Every 20 hours</option>
              <option value="24" selected>Every 24 hours</option>
            </select>
          </div>
        </div>
        <div class="hint">Requires Chromium-based browsers. After choosing a file once, we can overwrite it on schedule.</div>
      </section>

      <section class="card">
        <div class="section-title">Local export/import (manual)</div>
        <div class="actions">
          <button class="btn" id="exportBtn" type="button">Export JSON</button>
          <label class="btn ghost">
            Import JSON
            <input id="importInput" type="file" accept="application/json" />
          </label>
        </div>
      </section>
    </main>

    <script src="js/storage.js"></script>
    <script src="js/sync.js"></script>
  </body>
</html>


